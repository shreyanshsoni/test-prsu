version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Navigate to landing-page-static directory
        - cd landing-page-static
        # Install dependencies
        - npm install
        # Create .env file from Amplify environment variables
        - |
          cat <<EOF > .env
          DATABASE_URL=${DATABASE_URL}
          POSTGRES_URL=${POSTGRES_URL}
          NODE_ENV=production
          EOF
    build:
      commands:
        # Build from landing-page-static directory
        - cd landing-page-static
        - npm run build
  artifacts:
    baseDirectory: landing-page-static/.next
    files:
      - '**/*'
  cache:
    paths:
      - landing-page-static/node_modules/**/*
      - landing-page-static/.next/cache/**/*
  